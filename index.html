<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡è¦äº‹åŠ¡è®°å½•ä¸æé†’</title>
    <!-- å¼•å…¥Tailwind CSSç”¨äºå¿«é€Ÿæ„å»ºç¾è§‚ç•Œé¢ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- é…ç½®è‡ªå®šä¹‰é¢œè‰²ï¼ˆè“ç™½ä¸ºä¸»ï¼Œç´«è‰²ç‚¹ç¼€ï¼‰ -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF', // ä¸»è“è‰²
                        secondary: '#722ED1', // ç‚¹ç¼€ç´«è‰²
                        neutral: '#F5F7FA', // æµ…ç™½èƒŒæ™¯
                        dark: '#1D2129', // æ–‡å­—ä¸»è‰²
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .task-card-shadow {
                box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.08);
            }
            .btn-hover {
                transition: all 0.2s ease;
            }
            .btn-hover:hover {
                transform: translateY(-2px);
            }
        }
    </style>
</head>
<body class="bg-neutral min-h-screen font-sans text-dark">
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-bell text-primary text-2xl"></i>
                <h1 class="text-xl md:text-2xl font-bold text-primary">é‡è¦äº‹åŠ¡æé†’</h1>
            </div>
            <button id="notifyPermissionBtn" class="bg-primary/10 text-primary px-3 py-2 rounded-lg btn-hover">
                <i class="fa-solid fa-bell-slash mr-1"></i>
                <span>å¼€å¯é€šçŸ¥æƒé™</span>
            </button>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <!-- ä»»åŠ¡æ·»åŠ è¡¨å• -->
        <section class="bg-white rounded-xl p-6 mb-8 task-card-shadow">
            <h2 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fa-solid fa-plus-circle text-secondary mr-2"></i>
                æ·»åŠ æ–°äº‹åŠ¡
            </h2>
            <form id="taskForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="md:col-span-2">
                    <label for="taskTitle" class="block text-sm font-medium mb-1">äº‹åŠ¡æ ‡é¢˜ <span class="text-red-500">*</span></label>
                    <input type="text" id="taskTitle" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" placeholder="è¯·è¾“å…¥äº‹åŠ¡æ ‡é¢˜ï¼ˆå¦‚ï¼šé¡¹ç›®æ±‡æŠ¥ã€ä¼šè®®æé†’ï¼‰" required>
                </div>
                <div class="md:col-span-2">
                    <label for="taskDesc" class="block text-sm font-medium mb-1">äº‹åŠ¡æè¿°</label>
                    <textarea id="taskDesc" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" rows="2" placeholder="è¯·è¾“å…¥äº‹åŠ¡è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰"></textarea>
                </div>
                <div>
                    <label for="reminderTime" class="block text-sm font-medium mb-1">æé†’æ—¶é—´ <span class="text-red-500">*</span></label>
                    <input type="datetime-local" id="reminderTime" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                </div>
                <div>
                    <label for="taskPriority" class="block text-sm font-medium mb-1">ä¼˜å…ˆçº§</label>
                    <select id="taskPriority" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        <option value="low">ä½</option>
                        <option value="medium" selected>ä¸­</option>
                        <option value="high">é«˜</option>
                    </select>
                </div>
                <div class="md:col-span-2 flex justify-end gap-3">
                    <button type="reset" class="px-4 py-2 border border-gray-200 rounded-lg text-gray-600 btn-hover">
                        <i class="fa-solid fa-refresh mr-1"></i>é‡ç½®
                    </button>
                    <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg btn-hover">
                        <i class="fa-solid fa-save mr-1"></i>ä¿å­˜äº‹åŠ¡
                    </button>
                </div>
            </form>
        </section>

        <!-- ä»»åŠ¡åˆ—è¡¨ -->
        <section>
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-semibold flex items-center">
                    <i class="fa-solid fa-list-check text-secondary mr-2"></i>
                    æˆ‘çš„äº‹åŠ¡åˆ—è¡¨
                </h2>
                <div class="flex gap-2">
                    <button id="sortByTime" class="px-3 py-1 bg-white border border-gray-200 rounded-lg text-sm btn-hover">
                        <i class="fa-solid fa-clock mr-1"></i>æŒ‰æ—¶é—´æ’åº
                    </button>
                    <button id="clearCompleted" class="px-3 py-1 bg-secondary/10 text-secondary rounded-lg text-sm btn-hover">
                        <i class="fa-solid fa-trash mr-1"></i>æ¸…ç©ºå·²å®Œæˆ
                    </button>
                </div>
            </div>

            <!-- ç©ºçŠ¶æ€æç¤º -->
            <div id="emptyState" class="bg-white rounded-xl p-12 text-center task-card-shadow">
                <i class="fa-solid fa-clipboard-list text-gray-300 text-5xl mb-4"></i>
                <p class="text-gray-500">æš‚æ— äº‹åŠ¡è®°å½•ï¼Œæ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªé‡è¦äº‹åŠ¡å§ï¼</p>
            </div>

            <!-- ä»»åŠ¡åˆ—è¡¨å®¹å™¨ -->
            <div id="taskList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
        </section>
    </main>

    <!-- ç¼–è¾‘ä»»åŠ¡æ¨¡æ€æ¡† -->
    <div id="editModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl p-6 w-full max-w-md task-card-shadow">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-primary">ç¼–è¾‘äº‹åŠ¡</h3>
                <button id="closeModal" class="text-gray-400 hover:text-gray-600">
                    <i class="fa-solid fa-xmark text-xl"></i>
                </button>
            </div>
            <form id="editTaskForm" class="grid grid-cols-1 gap-4">
                <input type="hidden" id="editTaskId">
                <div>
                    <label for="editTaskTitle" class="block text-sm font-medium mb-1">äº‹åŠ¡æ ‡é¢˜ <span class="text-red-500">*</span></label>
                    <input type="text" id="editTaskTitle" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                </div>
                <div>
                    <label for="editTaskDesc" class="block text-sm font-medium mb-1">äº‹åŠ¡æè¿°</label>
                    <textarea id="editTaskDesc" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" rows="2"></textarea>
                </div>
                <div>
                    <label for="editReminderTime" class="block text-sm font-medium mb-1">æé†’æ—¶é—´ <span class="text-red-500">*</span></label>
                    <input type="datetime-local" id="editReminderTime" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary" required>
                </div>
                <div>
                    <label for="editTaskPriority" class="block text-sm font-medium mb-1">ä¼˜å…ˆçº§</label>
                    <select id="editTaskPriority" class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        <option value="low">ä½</option>
                        <option value="medium">ä¸­</option>
                        <option value="high">é«˜</option>
                    </select>
                </div>
                <div class="flex justify-end gap-3 mt-2">
                    <button type="button" id="cancelEdit" class="px-4 py-2 border border-gray-200 rounded-lg text-gray-600 btn-hover">å–æ¶ˆ</button>
                    <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg btn-hover">ä¿å­˜ä¿®æ”¹</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let tasks = [];
        const AUDIO_ALERT = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
        
        // DOMåŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–æœ¬åœ°å­˜å‚¨æ•°æ®
            initTasks();
            // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
            renderTasks();
            // ç»‘å®šäº‹ä»¶ç›‘å¬
            bindEvents();
            // æ£€æŸ¥é€šçŸ¥æƒé™
            checkNotificationPermission();
            // æ£€æŸ¥å¾…æé†’çš„ä»»åŠ¡
            checkReminders();
            // å®šæ—¶æ£€æŸ¥æé†’ï¼ˆæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼‰
            setInterval(checkReminders, 60000);
        });

        // åˆå§‹åŒ–ä»»åŠ¡æ•°æ®ï¼ˆä»localStorageè¯»å–ï¼‰
        function initTasks() {
            const storedTasks = localStorage.getItem('importantTasks');
            if (storedTasks) {
                tasks = JSON.parse(storedTasks);
            }
        }

        // ä¿å­˜ä»»åŠ¡åˆ°æœ¬åœ°å­˜å‚¨
        function saveTasksToStorage() {
            localStorage.setItem('importantTasks', JSON.stringify(tasks));
        }

        // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
        function renderTasks() {
            const taskListEl = document.getElementById('taskList');
            const emptyStateEl = document.getElementById('emptyState');
            
            // ç©ºçŠ¶æ€å¤„ç†
            if (tasks.length === 0) {
                emptyStateEl.classList.remove('hidden');
                taskListEl.classList.add('hidden');
                return;
            }
            
            emptyStateEl.classList.add('hidden');
            taskListEl.classList.remove('hidden');
            taskListEl.innerHTML = '';

            // æ¸²æŸ“æ¯ä¸ªä»»åŠ¡å¡ç‰‡
            tasks.forEach(task => {
                const priorityClass = {
                    low: 'bg-green-100 text-green-800',
                    medium: 'bg-blue-100 text-blue-800',
                    high: 'bg-red-100 text-red-800'
                }[task.priority];
                
                const priorityText = {
                    low: 'ä½',
                    medium: 'ä¸­',
                    high: 'é«˜'
                }[task.priority];

                // è®¡ç®—å‰©ä½™æ—¶é—´
                const now = new Date();
                const reminderTime = new Date(task.reminderTime);
                const isPast = reminderTime < now;
                const isCompleted = task.completed;

                // ä»»åŠ¡å¡ç‰‡HTML
                const taskCard = document.createElement('div');
                taskCard.className = `bg-white rounded-xl p-4 task-card-shadow transition-all ${isCompleted ? 'opacity-70' : ''}`;
                taskCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div class="flex items-center gap-2">
                            <input type="checkbox" ${isCompleted ? 'checked' : ''} data-id="${task.id}" class="task-completed-checkbox w-5 h-5 accent-secondary">
                            <h3 class="${isCompleted ? 'line-through text-gray-500' : 'font-semibold'}">${task.title}</h3>
                        </div>
                        <span class="text-xs px-2 py-1 rounded-full ${priorityClass}">${priorityText}</span>
                    </div>
                    ${task.desc ? `<p class="text-sm text-gray-600 mb-3">${task.desc}</p>` : ''}
                    <div class="text-sm text-gray-500 mb-3">
                        <i class="fa-solid fa-bell mr-1"></i>
                        ${formatDateTime(task.reminderTime)}
                        ${isPast && !isCompleted ? '<span class="text-red-500 ml-2">ï¼ˆå·²è¿‡æœŸï¼‰</span>' : ''}
                    </div>
                    <div class="flex justify-end gap-2">
                        <button data-id="${task.id}" class="edit-task-btn text-primary hover:text-secondary transition-colors">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </button>
                        <button data-id="${task.id}" class="delete-task-btn text-gray-500 hover:text-red-500 transition-colors">
                            <i class="fa-solid fa-trash-can"></i>
                        </button>
                    </div>
                `;
                
                // æ·»åŠ å®ŒæˆçŠ¶æ€åˆ‡æ¢äº‹ä»¶
                taskCard.querySelector('.task-completed-checkbox').addEventListener('change', (e) => {
                    toggleTaskCompleted(task.id, e.target.checked);
                });
                
                // æ·»åŠ ç¼–è¾‘äº‹ä»¶
                taskCard.querySelector('.edit-task-btn').addEventListener('click', () => {
                    openEditModal(task);
                });
                
                // æ·»åŠ åˆ é™¤äº‹ä»¶
                taskCard.querySelector('.delete-task-btn').addEventListener('click', () => {
                    deleteTask(task.id);
                });
                
                taskListEl.appendChild(taskCard);
            });
        }

        // ç»‘å®šæ‰€æœ‰äº‹ä»¶ç›‘å¬
        function bindEvents() {
            // æäº¤æ–°ä»»åŠ¡
            document.getElementById('taskForm').addEventListener('submit', (e) => {
                e.preventDefault();
                addNewTask();
            });

            // å¼€å¯é€šçŸ¥æƒé™
            document.getElementById('notifyPermissionBtn').addEventListener('click', requestNotificationPermission);

            // æŒ‰æ—¶é—´æ’åº
            document.getElementById('sortByTime').addEventListener('click', () => {
                sortTasksByTime();
            });

            // æ¸…ç©ºå·²å®Œæˆä»»åŠ¡
            document.getElementById('clearCompleted').addEventListener('click', clearCompletedTasks);

            // å…³é—­ç¼–è¾‘æ¨¡æ€æ¡†
            document.getElementById('closeModal').addEventListener('click', closeEditModal);
            document.getElementById('cancelEdit').addEventListener('click', closeEditModal);

            // æäº¤ç¼–è¾‘ä»»åŠ¡
            document.getElementById('editTaskForm').addEventListener('submit', (e) => {
                e.preventDefault();
                saveEditedTask();
            });
        }

        // æ·»åŠ æ–°ä»»åŠ¡
        function addNewTask() {
            const title = document.getElementById('taskTitle').value.trim();
            const desc = document.getElementById('taskDesc').value.trim();
            const reminderTime = document.getElementById('reminderTime').value;
            const priority = document.getElementById('taskPriority').value;

            // åˆ›å»ºæ–°ä»»åŠ¡å¯¹è±¡
            const newTask = {
                id: Date.now().toString(), // ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID
                title,
                desc,
                reminderTime,
                priority,
                completed: false
            };

            // æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨å¹¶ä¿å­˜
            tasks.unshift(newTask);
            saveTasksToStorage();
            
            // é‡ç½®è¡¨å•å¹¶é‡æ–°æ¸²æŸ“
            document.getElementById('taskForm').reset();
            renderTasks();
            
            // æ£€æŸ¥æ–°ä»»åŠ¡çš„æé†’
            checkReminders();
            
            // æç¤ºæˆåŠŸ
            alert('äº‹åŠ¡æ·»åŠ æˆåŠŸï¼');
        }

        // åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
        function toggleTaskCompleted(taskId, isCompleted) {
            const taskIndex = tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = isCompleted;
                saveTasksToStorage();
                renderTasks();
            }
        }

        // æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
        function openEditModal(task) {
            document.getElementById('editTaskId').value = task.id;
            document.getElementById('editTaskTitle').value = task.title;
            document.getElementById('editTaskDesc').value = task.desc;
            document.getElementById('editReminderTime').value = task.reminderTime;
            document.getElementById('editTaskPriority').value = task.priority;
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            document.getElementById('editModal').classList.remove('hidden');
        }

        // å…³é—­ç¼–è¾‘æ¨¡æ€æ¡†
        function closeEditModal() {
            document.getElementById('editModal').classList.add('hidden');
        }

        // ä¿å­˜ç¼–è¾‘åçš„ä»»åŠ¡
        function saveEditedTask() {
            const taskId = document.getElementById('editTaskId').value;
            const title = document.getElementById('editTaskTitle').value.trim();
            const desc = document.getElementById('editTaskDesc').value.trim();
            const reminderTime = document.getElementById('editReminderTime').value;
            const priority = document.getElementById('editTaskPriority').value;

            // æ›´æ–°ä»»åŠ¡ä¿¡æ¯
            const taskIndex = tasks.findIndex(t => t.id === taskId);
            if (taskIndex !== -1) {
                tasks[taskIndex] = {
                    ...tasks[taskIndex],
                    title,
                    desc,
                    reminderTime,
                    priority
                };
                
                // ä¿å­˜å¹¶é‡æ–°æ¸²æŸ“
                saveTasksToStorage();
                renderTasks();
                closeEditModal();
                
                // é‡æ–°æ£€æŸ¥æé†’
                checkReminders();
                
                // æç¤ºæˆåŠŸ
                alert('äº‹åŠ¡ä¿®æ”¹æˆåŠŸï¼');
            }
        }

        // åˆ é™¤ä»»åŠ¡
        function deleteTask(taskId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªäº‹åŠ¡å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ï¼')) {
                tasks = tasks.filter(t => t.id !== taskId);
                saveTasksToStorage();
                renderTasks();
            }
        }

        // æŒ‰æ—¶é—´æ’åºä»»åŠ¡ï¼ˆæœ€è¿‘æé†’çš„åœ¨å‰ï¼‰
        function sortTasksByTime() {
            tasks.sort((a, b) => new Date(a.reminderTime) - new Date(b.reminderTime));
            saveTasksToStorage();
            renderTasks();
            alert('å·²æŒ‰æé†’æ—¶é—´æ’åºï¼');
        }

        // æ¸…ç©ºå·²å®Œæˆä»»åŠ¡
        function clearCompletedTasks() {
            if (tasks.some(t => t.completed) && confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å·²å®Œæˆçš„äº‹åŠ¡å—ï¼Ÿ')) {
                tasks = tasks.filter(t => !t.completed);
                saveTasksToStorage();
                renderTasks();
                alert('å·²æ¸…ç©ºæ‰€æœ‰å·²å®Œæˆäº‹åŠ¡ï¼');
            } else if (!tasks.some(t => t.completed)) {
                alert('æš‚æ— å·²å®Œæˆçš„äº‹åŠ¡ï¼');
            }
        }

        // æ£€æŸ¥é€šçŸ¥æƒé™
        function checkNotificationPermission() {
            if (!('Notification' in window)) {
                alert('ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒæ¡Œé¢é€šçŸ¥åŠŸèƒ½ï¼Œè¯·æ›´æ¢ç°ä»£æµè§ˆå™¨ï¼ˆå¦‚Chromeã€Edgeï¼‰ï¼');
                return;
            }

            const btn = document.getElementById('notifyPermissionBtn');
            if (Notification.permission === 'granted') {
                btn.innerHTML = '<i class="fa-solid fa-bell mr-1"></i>é€šçŸ¥å·²å¼€å¯';
                btn.classList.remove('bg-primary/10', 'text-primary');
                btn.classList.add('bg-green-100', 'text-green-700');
            } else if (Notification.permission === 'denied') {
                btn.innerHTML = '<i class="fa-solid fa-bell-slash mr-1"></i>é€šçŸ¥å·²æ‹’ç»';
                btn.classList.remove('bg-primary/10', 'text-primary');
                btn.classList.add('bg-red-100', 'text-red-700');
            }
        }

        // è¯·æ±‚é€šçŸ¥æƒé™
        function requestNotificationPermission() {
            if (!('Notification' in window)) {
                alert('ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒæ¡Œé¢é€šçŸ¥åŠŸèƒ½ï¼');
                return;
            }

            Notification.requestPermission().then(permission => {
                checkNotificationPermission();
            });
        }

        // æ£€æŸ¥å¾…æé†’çš„ä»»åŠ¡
        function checkReminders() {
            const now = new Date();
            // è¯¯å·®èŒƒå›´ï¼š1åˆ†é’Ÿå†…çš„æé†’éƒ½è§¦å‘
            const timeThreshold = 60000;

            tasks.forEach(task => {
                // è·³è¿‡å·²å®Œæˆæˆ–å·²è¿‡æœŸè¿‡ä¹…çš„ä»»åŠ¡
                if (task.completed) return;
                
                const reminderTime = new Date(task.reminderTime);
                const timeDiff = reminderTime - now;

                // æé†’æ—¶é—´åœ¨1åˆ†é’Ÿå†…ï¼ˆåŒ…æ‹¬å·²è¿‡æœŸä½†ä¸è¶…è¿‡1åˆ†é’Ÿï¼‰
                if (timeDiff >= 0 && timeDiff <= timeThreshold) {
                    showReminderNotification(task);
                }
            });
        }

        // æ˜¾ç¤ºæé†’é€šçŸ¥
        function showReminderNotification(task) {
            // æ’­æ”¾æé†’éŸ³æ•ˆ
            AUDIO_ALERT.play();

            // æ¡Œé¢é€šçŸ¥
            if (Notification.permission === 'granted') {
                new Notification('é‡è¦äº‹åŠ¡æé†’', {
                    body: `${task.title}\næé†’æ—¶é—´ï¼š${formatDateTime(task.reminderTime)}`,
                    icon: 'https://cdn-icons-png.flaticon.com/512/802/802897.png',
                    requireInteraction: true // éœ€æ‰‹åŠ¨å…³é—­é€šçŸ¥
                });
            }

            // é¡µé¢å†…å¼¹çª—æé†’
            if (confirm(`ğŸ“¢ é‡è¦äº‹åŠ¡æé†’ï¼š\n${task.title}\n\næ˜¯å¦æ ‡è®°ä¸ºå·²å®Œæˆï¼Ÿ`)) {
                toggleTaskCompleted(task.id, true);
            }
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´æ˜¾ç¤º
        function formatDateTime(datetimeStr) {
            const date = new Date(datetimeStr);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
    </script>
</body>
</html>
